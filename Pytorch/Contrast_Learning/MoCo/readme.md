# MOCO

### 对比学习常数

**温度常数**（temperature constant, T）是用于控制分布的平滑度的超参数，主要出现在对比损失函数中，例如InfoNCE损失。

在公式中，温度常数被用来调节对比学习的logits：
$$
\text{loss} = -\log \frac{\exp(\text{sim}(\mathbf{q}, \mathbf{k}^+)/T)}{\exp(\text{sim}(\mathbf{q}, \mathbf{k}^+)/T) + \sum_{i=1}^{K} \exp(\text{sim}(\mathbf{q}, \mathbf{k}_i^-)/T)}
$$

#### 作用

1. **调节分布平滑性**：

   * 当 T **较大**时，分布更平滑，权重分布更均匀，对负样本的影响更均等。

   - 当 T **较小**时，分布更尖锐，模型更加关注对最相似的负样本进行区分。

2. **对比难度调整**：

   - 小 T ：强调模型在**难负样本**（那些与正样本相似的负样本）上的学习。
   - 大 T ：更平均地关注所有负样本，训练更加稳定，但区分力可能减弱。

3. **梯度调节**： 温度常数会影响损失函数中每个样本的梯度大小，从而间接影响模型更新速度和方向。

#### 选择温度常数的影响

- **过大**的 T：使所有样本对的得分相近，难以区分正负样本，损失函数趋于平坦，可能导致模型难以收敛。
- **过小**的 T：损失函数过于敏感，可能导致数值不稳定或者模型关注过于局部的难负样本而忽略其他有价值的信息。

#### 实验建议

- 通常在 0.05 到 0.2 范围内调整温度常数。
- 论文中的经验值：MoCo 和 SimCLR 使用 T=0.07T=0.07 的效果比较好，但具体取值需要根据任务、数据分布进行实验调优。
